{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Cards - Yu-Gi-Oh Card Shop</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Custom CSS Files -->
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/cards.css' %}">
    <link rel="stylesheet" href="{% static 'css/card-list-cart.css' %}">
</head>
<body>
   <!-- Navigation -->  
       {% include 'includes/navbar.html' %}

    <!-- Page Header -->
    <div class="page-header">
        <div class="container">
            <h1 class="display-4 fw-bold mb-3">
                <i class="fas fa-cards-blank me-3"></i>All Yu-Gi-Oh Cards
            </h1>
            <p class="lead">Discover your next powerful addition to the deck</p>
        </div>
    </div>

    <div class="container">
        <!-- Search and Filters -->
        <div class="search-filters">
            <form class="row g-3">
                <!-- Search Box -->
                <div class="col-md-6">
                    <label for="search" class="form-label fw-bold">
                        <i class="fas fa-search me-2"></i>Search Cards
                    </label>
                    <input type="text" 
                           class="form-control" 
                           id="search" 
                           placeholder="Search by name or description...">
                </div>

                <!-- Card Type Filter -->
                <div class="col-md-2">
                    <label for="type" class="form-label fw-bold">Card Type</label>
                    <select class="form-select" id="type">
                        <option value="">All Types</option>
                        <option value="monster">Monster</option>
                        <option value="spell">Spell</option>
                        <option value="trap">Trap</option>
                    </select>
                </div>

                <!-- Rarity Filter -->
                <div class="col-md-2">
                    <label for="rarity" class="form-label fw-bold">Rarity</label>
                    <select class="form-select" id="rarity">
                        <option value="">All Rarities</option>
                        <option value="common">Common</option>
                        <option value="rare">Rare</option>
                        <option value="super-rare">Super Rare</option>
                        <option value="ultra-rare">Ultra Rare</option>
                        <option value="secret-rare">Secret Rare</option>
                        <option value="ghost-rare">Ghost Rare</option>
                    </select>
                </div>

                <!-- Card Set Filter -->
                <div class="col-md-2">
                    <label for="set" class="form-label fw-bold">Card Set</label>
                    <select class="form-select" id="set">
                        <option value="">All Sets</option>
                        <option value="lob">Legend of Blue Eyes</option>
                        <option value="mrd">Metal Raiders</option>
                        <option value="sdy">Starter Deck Yugi</option>
                        <option value="sdk">Starter Deck Kaiba</option>
                    </select>
                </div>

                <!-- Submit Buttons -->
                <div class="col-12">
                    <button type="button" class="btn btn-primary me-2" onclick="filterCards()">
                        <i class="fas fa-search me-2"></i>Search
                    </button>
                    <button type="button" class="btn btn-outline-secondary" onclick="clearFilters()">
                        <i class="fas fa-times me-2"></i>Clear Filters
                    </button>
                </div>
            </form>
        </div>

        <!-- Results Summary -->
        <div class="results-summary">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h5 class="mb-2">Showing 1-12 of 156 cards</h5>
                    <div id="active-filters">
                        <!-- Active filters will appear here -->
                    </div>
                </div>
                <div class="col-md-4 text-end">
                    <select class="form-select" id="sort">
                        <option value="">Sort by...</option>
                        <option value="name-asc">Name (A-Z)</option>
                        <option value="name-desc">Name (Z-A)</option>
                        <option value="price-asc">Price (Low to High)</option>
                        <option value="price-desc">Price (High to Low)</option>
                        <option value="newest">Newest First</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Card Grid -->
        <div class="card-grid" id="card-grid">
            <!-- Blue-Eyes White Dragon -->
            <div class="yugioh-card-item" data-name="Blue-Eyes White Dragon" data-type="monster" data-rarity="ultra-rare" data-set="lob" data-price="299.99">
                <div class="card-image">
                    <div class="card-placeholder">
                        <i class="fas fa-dragon"></i>
                    </div>
                    <div class="card-rarity rarity-ultra-rare">Ultra Rare</div>
                </div>
                <div class="card-info">
                    <h3 class="card-title">Blue-Eyes White Dragon</h3>
                    <div class="card-type">Monster | Level 8</div>
                    <div class="mb-2">
                        <small class="text-muted">ATK: 3000 / DEF: 2500</small>
                    </div>
                    <div class="card-price">$299.99</div>
                    <div class="card-stock">
                        <i class="fas fa-check-circle text-success"></i>
                        5 in stock
                    </div>
                    <div class="card-actions">
                        <a href="#" class="btn-view">
                            <i class="fas fa-eye me-1"></i>View Details
                        </a>
                        <button class="btn-cart">
                            <i class="fas fa-cart-plus me-1"></i>Add to Cart
                        </button>
                    </div>
                </div>
            </div>

            <!-- Dark Magician -->
            <div class="yugioh-card-item" data-name="Dark Magician" data-type="monster" data-rarity="secret-rare" data-set="lob" data-price="199.99">
                <div class="card-image">
                    <div class="card-placeholder">
                        <i class="fas fa-magic"></i>
                    </div>
                    <div class="card-rarity rarity-secret-rare">Secret Rare</div>
                </div>
                <div class="card-info">
                    <h3 class="card-title">Dark Magician</h3>
                    <div class="card-type">Monster | Level 7</div>
                    <div class="mb-2">
                        <small class="text-muted">ATK: 2500 / DEF: 2100</small>
                    </div>
                    <div class="card-price">$199.99</div>
                    <div class="card-stock">
                        <i class="fas fa-check-circle text-success"></i>
                        3 in stock
                    </div>
                    <div class="card-actions">
                        <a href="#" class="btn-view">
                            <i class="fas fa-eye me-1"></i>View Details
                        </a>
                        <button class="btn-cart">
                            <i class="fas fa-cart-plus me-1"></i>Add to Cart
                        </button>
                    </div>
                </div>
            </div>

            <!-- Exodia the Forbidden One -->
            <div class="yugioh-card-item" data-name="Exodia the Forbidden One" data-type="monster" data-rarity="ghost-rare" data-set="lob" data-price="999.99">
                <div class="card-image">
                    <div class="card-placeholder">
                        <i class="fas fa-eye"></i>
                    </div>
                    <div class="card-rarity rarity-ghost-rare">Ghost Rare</div>
                </div>
                <div class="card-info">
                    <h3 class="card-title">Exodia the Forbidden One</h3>
                    <div class="card-type">Monster | Level 3</div>
                    <div class="mb-2">
                        <small class="text-muted">ATK: 1000 / DEF: 1000</small>
                    </div>
                    <div class="card-price">$999.99</div>
                    <div class="card-stock">
                        <i class="fas fa-check-circle text-success"></i>
                        1 in stock
                    </div>
                    <div class="card-actions">
                        <a href="#" class="btn-view">
                            <i class="fas fa-eye me-1"></i>View Details
                        </a>
                        <button class="btn-cart">
                            <i class="fas fa-cart-plus me-1"></i>Add to Cart
                        </button>
                    </div>
                </div>
            </div>

            <!-- Lightning Storm -->
            <div class="yugioh-card-item" data-name="Lightning Storm" data-type="spell" data-rarity="super-rare" data-set="mrd" data-price="89.99">
                <div class="card-image">
                    <div class="card-placeholder">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <div class="card-rarity rarity-super-rare">Super Rare</div>
                </div>
                <div class="card-info">
                    <h3 class="card-title">Lightning Storm</h3>
                    <div class="card-type">Spell</div>
                    <div class="card-price">$89.99</div>
                    <div class="card-stock">
                        <i class="fas fa-check-circle text-success"></i>
                        12 in stock
                    </div>
                    <div class="card-actions">
                        <a href="#" class="btn-view">
                            <i class="fas fa-eye me-1"></i>View Details
                        </a>
                        <button class="btn-cart">
                            <i class="fas fa-cart-plus me-1"></i>Add to Cart
                        </button>
                    </div>
                </div>
            </div>

            <!-- Mirror Force -->
            <div class="yugioh-card-item" data-name="Mirror Force" data-type="trap" data-rarity="rare" data-set="mrd" data-price="45.99">
                <div class="card-image">
                    <div class="card-placeholder">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="card-rarity rarity-rare">Rare</div>
                </div>
                <div class="card-info">
                    <h3 class="card-title">Mirror Force</h3>
                    <div class="card-type">Trap</div>
                    <div class="card-price">$45.99</div>
                    <div class="card-stock">
                        <i class="fas fa-check-circle text-success"></i>
                        8 in stock
                    </div>
                    <div class="card-actions">
                        <a href="#" class="btn-view">
                            <i class="fas fa-eye me-1"></i>View Details
                        </a>
                        <button class="btn-cart">
                            <i class="fas fa-cart-plus me-1"></i>Add to Cart
                        </button>
                    </div>
                </div>
            </div>

            <!-- Red-Eyes Black Dragon -->
            <div class="yugioh-card-item" data-name="Red-Eyes Black Dragon" data-type="monster" data-rarity="ultra-rare" data-set="lob" data-price="189.99">
                <div class="card-image">
                    <div class="card-placeholder">
                        <i class="fas fa-dragon"></i>
                    </div>
                    <div class="card-rarity rarity-ultra-rare">Ultra Rare</div>
                </div>
                <div class="card-info">
                    <h3 class="card-title">Red-Eyes Black Dragon</h3>
                    <div class="card-type">Monster | Level 7</div>
                    <div class="mb-2">
                        <small class="text-muted">ATK: 2400 / DEF: 2000</small>
                    </div>
                    <div class="card-price">$189.99</div>
                    <div class="card-stock">
                        <i class="fas fa-check-circle text-success"></i>
                        4 in stock
                    </div>
                    <div class="card-actions">
                        <a href="#" class="btn-view">
                            <i class="fas fa-eye me-1"></i>View Details
                        </a>
                        <button class="btn-cart">
                            <i class="fas fa-cart-plus me-1"></i>Add to Cart
                        </button>
                    </div>
                </div>
            </div>

            <!-- Mystical Space Typhoon -->
            <div class="yugioh-card-item" data-name="Mystical Space Typhoon" data-type="spell" data-rarity="common" data-set="mrd" data-price="12.99">
                <div class="card-image">
                    <div class="card-placeholder">
                        <i class="fas fa-tornado"></i>
                    </div>
                    <div class="card-rarity rarity-common">Common</div>
                </div>
                <div class="card-info">
                    <h3 class="card-title">Mystical Space Typhoon</h3>
                    <div class="card-type">Spell</div>
                    <div class="card-price">$12.99</div>
                    <div class="card-stock">
                        <i class="fas fa-check-circle text-success"></i>
                        25 in stock
                    </div>
                    <div class="card-actions">
                        <a href="#" class="btn-view">
                            <i class="fas fa-eye me-1"></i>View Details
                        </a>
                        <button class="btn-cart">
                            <i class="fas fa-cart-plus me-1"></i>Add to Cart
                        </button>
                    </div>
                </div>
            </div>

            <!-- Pot of Greed -->
            <div class="yugioh-card-item" data-name="Pot of Greed" data-type="spell" data-rarity="rare" data-set="lob" data-price="65.99">
                <div class="card-image">
                    <div class="card-placeholder">
                        <i class="fas fa-cookie-bite"></i>
                    </div>
                    <div class="card-rarity rarity-rare">Rare</div>
                </div>
                <div class="card-info">
                    <h3 class="card-title">Pot of Greed</h3>
                    <div class="card-type">Spell</div>
                    <div class="card-price">$65.99</div>
                    <div class="card-stock">
                        <i class="fas fa-times-circle text-danger"></i>
                        Out of stock
                    </div>
                    <div class="card-actions">
                        <a href="#" class="btn-view">
                            <i class="fas fa-eye me-1"></i>View Details
                        </a>
                        <button class="btn-cart" disabled>
                            <i class="fas fa-times me-1"></i>Out of Stock
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pagination -->
        <nav aria-label="Card pagination">
            <ul class="pagination pagination-custom">
                <li class="page-item disabled">
                    <span class="page-link">
                        <i class="fas fa-angle-double-left"></i>
                    </span>
                </li>
                <li class="page-item disabled">
                    <span class="page-link">
                        <i class="fas fa-angle-left"></i>
                    </span>
                </li>
                <li class="page-item active">
                    <span class="page-link">Page 1 of 13</span>
                </li>
                <li class="page-item">
                    <a class="page-link" href="#">
                        <i class="fas fa-angle-right"></i>
                    </a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="#">
                        <i class="fas fa-angle-double-right"></i>
                    </a>
                </li>
            </ul>
        </nav>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Filter and search functionality
        function filterCards() {
            const search = document.getElementById('search').value.toLowerCase();
            const type = document.getElementById('type').value;
            const rarity = document.getElementById('rarity').value;
            const set = document.getElementById('set').value;
            
            const cards = document.querySelectorAll('.yugioh-card-item');
            let visibleCount = 0;
            
            // Update active filters display
            updateActiveFilters(search, type, rarity, set);
            
            cards.forEach(card => {
                const cardName = card.dataset.name.toLowerCase();
                const cardType = card.dataset.type;
                const cardRarity = card.dataset.rarity;
                const cardSet = card.dataset.set;
                
                let show = true;
                
                if (search && !cardName.includes(search)) show = false;
                if (type && cardType !== type) show = false;
                if (rarity && cardRarity !== rarity) show = false;
                if (set && cardSet !== set) show = false;
                
                if (show) {
                    card.style.display = 'block';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });
            
            // Update results summary
            document.querySelector('.results-summary h5').textContent = 
                `Showing 1-${visibleCount} of ${visibleCount} cards`;
        }
        
        function clearFilters() {
            document.getElementById('search').value = '';
            document.getElementById('type').value = '';
            document.getElementById('rarity').value = '';
            document.getElementById('set').value = '';
            
            const cards = document.querySelectorAll('.yugioh-card-item');
            cards.forEach(card => {
                card.style.display = 'block';
            });
            
            document.getElementById('active-filters').innerHTML = '';
            document.querySelector('.results-summary h5').textContent = 
                'Showing 1-8 of 8 cards';
        }
        
        function updateActiveFilters(search, type, rarity, set) {
            const filtersContainer = document.getElementById('active-filters');
            let filtersHTML = '';
            
            if (search || type || rarity || set) {
                filtersHTML = '<strong>Active filters:</strong> ';
                
                if (search) filtersHTML += `<span class="filter-tag">Search: "${search}"</span>`;
                if (type) filtersHTML += `<span class="filter-tag">Type: ${type}</span>`;
                if (rarity) filtersHTML += `<span class="filter-tag">Rarity: ${rarity}</span>`;
                if (set) filtersHTML += `<span class="filter-tag">Set: ${set}</span>`;
            }
            
            filtersContainer.innerHTML = filtersHTML;
        }
        
        // Auto-filter when selections change
        document.getElementById('type').addEventListener('change', filterCards);
        document.getElementById('rarity').addEventListener('change', filterCards);
        document.getElementById('set').addEventListener('change', filterCards);
        
        // Search on Enter key
        document.getElementById('search').addEventListener('keyup', function(event) {
            if (event.key === 'Enter') {
                filterCards();
            }
        });
        
        // Sort functionality
        document.getElementById('sort').addEventListener('change', function() {
            const sortValue = this.value;
            const cardGrid = document.getElementById('card-grid');
            const cards = Array.from(cardGrid.children);
            
            cards.sort((a, b) => {
                switch (sortValue) {
                    case 'name-asc':
                        return a.dataset.name.localeCompare(b.dataset.name);
                    case 'name-desc':
                        return b.dataset.name.localeCompare(a.dataset.name);
                    case 'price-asc':
                        return parseFloat(a.dataset.price) - parseFloat(b.dataset.price);
                    case 'price-desc':
                        return parseFloat(b.dataset.price) - parseFloat(a.dataset.price);
                    default:
                        return 0;
                }
            });
            
            // Re-append sorted cards
            cards.forEach(card => cardGrid.appendChild(card));
        });
        
        // Add to cart functionality
        document.querySelectorAll('.btn-cart').forEach(button => {
            if (!button.disabled) {
                button.addEventListener('click', function() {
                    const cardName = this.closest('.yugioh-card-item').dataset.name;
                    alert(`Added ${cardName} to cart!`);
                });
            }
        });
    </script>
</body>
</html>